(function(e,n,r){function d(){a=n[f](function(){o.each(function(){var t=e(this),n=t.width(),r=t.height(),i=e.data(this,c);if(n!==i.w||r!==i.h){t.trigger(l,[i.w=n,i.h=r])}});d()},u[h])}var i=function(n,r){var i=this;i.options=r;i.sliderContent=n,i.sliderInner=i.sliderContent.html();i.sliderContent.html("<div class='iviewSlider'>"+i.sliderInner+"</div>");i.slider=e(".iviewSlider",i.sliderContent);i.slider.css("position","relative");i.defs={slide:0,total:0,image:"",images:[],width:i.sliderContent.width(),height:i.sliderContent.height(),timer:r.timer.toLowerCase(),lock:false,paused:r.autoAdvance?false:true,time:r.pauseTime,easing:r.easing};i.disableSelection(i.slider[0]);i.slides=i.slider.children();i.slides.each(function(t){var n=e(this);i.defs.images.push(n.data("iview:image"));if(n.data("iview:thumbnail"))i.defs.images.push(n.data("iview:thumbnail"));n.css("display","none");if(n.data("iview:type")=="video"){var s=n.children().eq(0),o=e('<div class="iview-video-show"><div class="iview-video-container"><a class="iview-video-close" title="'+r.closeLabel+'">&#735;</a></div></div>');n.append(o);s.appendTo(e("div.iview-video-container",o));o.css({width:i.defs.width,height:i.defs.height,top:"-"+i.defs.height+"px"}).hide();n.addClass("iview-video").css({cursor:"pointer"})}i.defs.total++}).css({width:i.defs.width,height:i.defs.height});i.sliderContent.append('<div id="iview-preloader"><div></div></div>');var o=e("#iview-preloader",i.sliderContent);var u=e("div",o);o.css({top:i.defs.height/2-o.height()/2+"px",left:i.defs.width/2-o.width()/2+"px"});i.sliderContent.append('<div id="iview-timer"><div></div></div>');i.iviewTimer=e("#iview-timer",i.sliderContent);i.iviewTimer.hide();e(".iview-caption",i.slider).each(function(t){var n=e(this);n.html('<div class="caption-contain">'+n.html()+"</div>")});r.startSlide=r.randomStart?Math.floor(Math.random()*i.defs.total):r.startSlide;r.startSlide=r.startSlide>0&&r.startSlide>=i.defs.total?i.defs.total-1:r.startSlide;i.defs.slide=r.startSlide;i.defs.image=i.slides.eq(i.defs.slide);i.defs.time=i.defs.image.data("iview:pausetime")?i.defs.image.data("iview:pausetime"):r.pauseTime;i.defs.easing=i.defs.image.data("iview:easing")?i.defs.image.data("iview:easing"):r.easing;i.pieDegree=0;var a=r.timerPadding,f=r.timerDiameter,l=r.timerStroke;if(i.defs.total>1&&i.defs.timer!="bar"){l=i.defs.timer=="360bar"?r.timerStroke:0;var c=f+a*2+l*2,h=c,p=Raphael(i.iviewTimer[0],c,h);i.R=f/2;var d={stroke:r.timerBg,"stroke-width":l+a*2},v={stroke:r.timerColor,"stroke-width":l,"stroke-linecap":"round"},m={fill:r.timerColor,stroke:"none","stroke-width":0},g={fill:r.timerBg,stroke:"none","stroke-width":0};p.customAttributes.arc=function(e,t){var n=360,r=360/n*e,i=(90-r)*Math.PI/180,s=f/2+a+l,o=f/2+a+l,u=s+t*Math.cos(i),c=o-t*Math.sin(i),h;if(n==e){h=[["M",s,o-t],["A",t,t,0,1,1,299.99,o-t]]}else{h=[["M",s,o-t],["A",t,t,0,+(r>180),1,u,c]]}return{path:h}};p.customAttributes.segment=function(e,t){var n=-90;t=t-1;e=n+e;var r=e-n>180,i=f/2+a,s=f/2+a;n=n%360*Math.PI/180;e=e%360*Math.PI/180;return{path:[["M",i,s],["l",t*Math.cos(n),t*Math.sin(n)],["A",t,t,0,+r,1,i+t*Math.cos(e),s+t*Math.sin(e)],["z"]]}};if(i.defs.total>1&&i.defs.timer=="pie"){p.circle(i.R+a,i.R+a,i.R+a-1).attr(g)}i.timerBgPath=p.path().attr(d),i.timerPath=p.path().attr(v),i.pieTimer=p.path().attr(m)}i.barTimer=e("div",i.iviewTimer);if(i.defs.total>1&&i.defs.timer=="360bar"){i.timerBgPath.attr({arc:[359.9,i.R]})}if(i.defs.timer=="bar"){i.iviewTimer.css({opacity:r.timerOpacity,width:f,height:l,border:r.timerBarStroke+"px "+r.timerBarStrokeColor+" "+r.timerBarStrokeStyle,padding:a,background:r.timerBg});i.barTimer.css({width:0,height:l,background:r.timerColor,"float":"left"})}else{i.iviewTimer.css({opacity:r.timerOpacity,width:c,height:h})}i.setTimerPosition();new s(i.defs.images,function(e){var t=e*10;u.stop().animate({width:t+"%"})},function(){u.stop().animate({width:"100%"},function(){o.remove();i.startSlider();r.onAfterLoad.call(this)})});i.sliderContent.bind("swipeleft",function(){if(i.defs.lock)return false;i.cleanTimer();i.goTo("next")}).bind("swiperight",function(){if(i.defs.lock)return false;i.cleanTimer();i.defs.slide-=2;i.goTo("prev")});if(r.keyboardNav){e(document).bind("keyup.iView",function(e){if(e.keyCode=="37"){if(i.defs.lock)return false;i.cleanTimer();i.defs.slide-=2;i.goTo("prev")}if(e.keyCode=="39"){if(i.defs.lock)return false;i.cleanTimer();i.goTo("next")}})}i.iviewTimer.on("click",function(){if(i.iviewTimer.hasClass("paused")){i.playSlider()}else{i.stopSlider()}});i.sliderContent.bind("iView:pause",function(){i.stopSlider()});i.sliderContent.bind("iView:play",function(){i.playSlider()});i.sliderContent.bind("iView:previous",function(){if(i.defs.lock)return false;i.cleanTimer();i.defs.slide-=2;i.goTo("prev")});i.sliderContent.bind("iView:next",function(){if(i.defs.lock)return false;i.cleanTimer();i.goTo("next")});i.sliderContent.bind("iView:goSlide",function(t,n){if(i.defs.lock||i.defs.slide==n)return false;if(e(this).hasClass("active"))return false;i.cleanTimer();i.slider.css("background",'url("'+i.defs.image.data("iview:image")+'") no-repeat');i.defs.slide=n-1;i.goTo("control")});i.sliderContent.bind("resize",function(){t=e(this),tW=t.width(),tH=t.height(),c=i.slider.width(),h=i.slider.height();if(i.defs.width!=tW){var n=tW/c,r=Math.round(i.defs.height*n);i.slider.css({"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+n+")","-moz-transform":"scale("+n+")","-o-transform":"scale("+n+")","-ms-transform":"scale("+n+")",transform:"scale("+n+")"});t.css({height:r});i.defs.width=tW;i.setTimerPosition()}});e(".iview-video",i.slider).click(function(t){var n=e(this),r=e(".iview-video-show",n);if(!e(t.target).hasClass("iview-video-close")&&!e(t.target).hasClass("iview-caption")&&!e(t.target).parents().hasClass("iview-caption")){r.show().animate({top:0},1e3,"easeOutBounce");i.sliderContent.trigger("iView:pause")}});e(".iview-video-close",i.slider).click(function(){var t=e(this).parents(".iview-video-show"),n=e("iframe",t),r=n.attr("src");n.removeAttr("src").attr("src",r);t.animate({top:"-"+i.defs.height+"px"},1e3,"easeOutBounce",function(){t.hide();i.sliderContent.trigger("iView:play")})})};i.prototype={timer:null,startSlider:function(){var t=this;var n=new Image;n.src=t.slides.eq(0).data("iview:image");imgWidth=n.width;if(imgWidth!=t.defs.width){t.defs.width=imgWidth;t.sliderContent.trigger("resize")}t.iviewTimer.show();t.slides.eq(t.defs.slide).css("display","block");t.slider.css("background",'url("'+t.defs.image.data("iview:image")+'") no-repeat');t.setCaption(t.options);t.iviewTimer.addClass("paused").attr("title",t.options.playLabel);if(t.options.autoAdvance&&t.defs.total>1){t.iviewTimer.removeClass("paused").attr("title",t.options.pauseLabel);t.setTimer()}if(t.options.directionNav){t.sliderContent.append('<div class="iview-directionNav"><a class="iview-prevNav" title="'+t.options.previousLabel+'">'+t.options.previousLabel+'</a><a class="iview-nextNav" title="'+t.options.nextLabel+'">'+t.options.nextLabel+"</a></div>");e(".iview-directionNav",t.sliderContent).css({opacity:t.options.directionNavHoverOpacity});t.sliderContent.hover(function(){e(".iview-directionNav",t.sliderContent).stop().animate({opacity:1},300)},function(){e(".iview-directionNav",t.sliderContent).stop().animate({opacity:t.options.directionNavHoverOpacity},300)});e("a.iview-prevNav",t.sliderContent).on("click",function(){if(t.defs.lock)return false;t.cleanTimer();t.defs.slide-=2;t.goTo("prev")});e("a.iview-nextNav",t.sliderContent).on("click",function(){if(t.defs.lock)return false;t.cleanTimer();t.goTo("next")})}if(t.options.controlNav){var r='<div class="iview-controlNav">',i="";if(!t.options.directionNav&&t.options.controlNavNextPrev)r+='<a class="iview-controlPrevNav" title="'+t.options.previousLabel+'">'+t.options.previousLabel+"</a>";r+='<div class="iview-items"><ul>';for(var s=0;s<t.defs.total;s++){var o=t.slides.eq(s);r+="<li>";if(t.options.controlNavThumbs){var u=o.data("iview:thumbnail")?o.data("iview:thumbnail"):o.data("iview:image");r+='<a class="iview-control" rel="'+s+'"><img src="'+u+'" /></a>'}else{var u=o.data("iview:thumbnail")?o.data("iview:thumbnail"):o.data("iview:image");r+='<a class="iview-control" rel="'+s+'">'+(s+1)+"</a>";if(t.options.controlNavTooltip)i+='<div rel="'+s+'"><img src="'+u+'" /></div>'}r+="</li>"}r+="</ul></div>";if(!t.options.directionNav&&t.options.controlNavNextPrev)r+='<a class="iview-controlNextNav" title="'+t.options.nextLabel+'">'+t.options.nextLabel+"</a>";r+="</div>";if(!t.options.controlNavThumbs&&t.options.controlNavTooltip)r+='<div id="iview-tooltip"><div class="holder"><div class="container">'+i+"</div></div></div>";t.sliderContent.append(r);e(".iview-controlNav a.iview-control:eq("+t.defs.slide+")",t.sliderContent).addClass("active");e("a.iview-controlPrevNav",t.sliderContent).on("click",function(){if(t.defs.lock)return false;t.cleanTimer();t.defs.slide-=2;t.goTo("prev")});e("a.iview-controlNextNav",t.sliderContent).on("click",function(){if(t.defs.lock)return false;t.cleanTimer();t.goTo("next")});e(".iview-controlNav a.iview-control",t.sliderContent).on("click",function(){if(t.defs.lock)return false;if(e(this).hasClass("active"))return false;t.cleanTimer();t.slider.css("background",'url("'+t.defs.image.data("iview:image")+'") no-repeat');t.defs.slide=e(this).attr("rel")-1;t.goTo("control")});e(".iview-controlNav",t.sliderContent).css({opacity:t.options.controlNavHoverOpacity});t.sliderContent.hover(function(){e(".iview-controlNav",t.sliderContent).stop().animate({opacity:1},300);t.sliderContent.addClass("iview-hover")},function(){e(".iview-controlNav",t.sliderContent).stop().animate({opacity:t.options.controlNavHoverOpacity},300);t.sliderContent.removeClass("iview-hover")});var a=null;e(".iview-controlNav a.iview-control",t.sliderContent).hover(function(n){var r=e(this),i=r.attr("rel"),s=e("#iview-tooltip",t.sliderContent),o=e("div.holder",s),u=r.offset().left-t.sliderContent.offset().left-s.outerWidth()/2+t.options.tooltipX,f=r.offset().top-t.sliderContent.offset().top-s.outerHeight()+t.options.tooltipY,l=e("div[rel="+i+"]");scrollLeft=i*l.width();s.stop().animate({left:u,top:f,opacity:1},300);if(s.not(":visible"))s.fadeIn(300);o.stop().animate({scrollLeft:scrollLeft},300);clearTimeout(a)},function(n){var r=e("#iview-tooltip",t.sliderContent);a=setTimeout(function(){r.animate({opacity:0},300,function(){r.hide()})},200)})}t.sliderContent.bind("mouseover.iView mousemove.iView",function(){if(t.options.pauseOnHover&&!t.defs.paused)t.cleanTimer();t.sliderContent.addClass("iview-hover")}).bind("mouseout.iView",function(){if(t.options.pauseOnHover&&!t.defs.paused&&t.timer==null&&t.pieDegree<=359&&t.options.autoAdvance)t.setTimer();t.sliderContent.removeClass("iview-hover")})},setCaption:function(){var t=this,n=t.slides.eq(t.defs.slide),r=e(".iview-caption",n),i=0;r.each(function(n){var r=e(this),s=r.data("transition")?e.trim(r.data("transition").toLowerCase()):"fade",o=r.data("speed")?r.data("speed"):t.options.captionSpeed,u=r.data("easing")?r.data("easing"):t.options.captionEasing,a=r.data("x")!="undefined"?r.data("x"):"center",f=r.data("y")!="undefined"?r.data("y"):"center",l=r.data("width")?r.data("width"):r.width(),c=r.data("height")?r.data("height"):r.height(),h=r.outerWidth(),p=r.outerHeight();if(a=="center")a=t.defs.width/2-h/2;if(f=="center")f=t.defs.height/2-p/2;var d=e(".caption-contain",r);r.css({opacity:0});d.css({opacity:0,position:"relative",width:l,height:c});switch(s){case"wipedown":r.css({top:f-c,left:a});d.css({top:c+c*3,left:0});break;case"wipeup":r.css({top:f+c,left:a});d.css({top:c-c*3,left:0});break;case"wiperight":r.css({top:f,left:a-l});d.css({top:0,left:l+l*2});break;case"wipeleft":r.css({top:f,left:a+l});d.css({top:0,left:l-l*2});break;case"fade":r.css({top:f,left:a});d.css({top:0,left:0});break;case"expanddown":r.css({top:f,left:a,height:0});d.css({top:c+c*3,left:0});break;case"expandup":r.css({top:f+c,left:a,height:0});d.css({top:c-c*3,left:0});break;case"expandright":r.css({top:f,left:a,width:0});d.css({top:0,left:l+l*2});break;case"expandleft":r.css({top:f,left:a+l,width:0});d.css({top:0,left:l-l*2});break}setTimeout(function(){r.animate({opacity:t.options.captionOpacity,top:f,left:a,width:l,height:c},o,u,function(){})},i);setTimeout(function(){d.animate({opacity:t.options.captionOpacity,top:0,left:0},o,u)},i+100);i+=250})},processTimer:function(){var e=this;if(e.defs.timer=="360bar"){var t=e.pieDegree==0?0:e.pieDegree+.9;e.timerPath.attr({arc:[t,e.R]})}else if(e.defs.timer=="pie"){var t=e.pieDegree==0?0:e.pieDegree+.9;e.pieTimer.attr({segment:[t,e.R]})}else{e.barTimer.css({width:e.pieDegree/360*100+"%"})}e.pieDegree+=3},transitionEnd:function(t){t.options.onAfterChange.call(this);t.defs.lock=false;t.slides.css("display","none");t.slides.eq(t.defs.slide).show();t.slider.css("background",'url("'+t.defs.image.data("iview:image")+'") no-repeat');e(".iview-strip, .iview-block",t.slider).remove();t.defs.time=t.defs.image.data("iview:pausetime")?t.defs.image.data("iview:pausetime"):t.options.pauseTime;t.iviewTimer.animate({opacity:t.options.timerOpacity});t.pieDegree=0;t.processTimer();t.setCaption(t.options);if(t.timer==null&&!t.defs.paused)t.timer=setInterval(function(){t.timerCall(t)},t.defs.time/120)},addStrips:function(t,n){var r=this;n=n?n:r.options;for(var i=0;i<n.strips;i++){var s=Math.round(r.slider.width()/n.strips),o=Math.round(r.slider.height()/n.strips),u="-"+(s+i*s-s)+"px 0%",a=t?o*i+"px":"0px",f=t?"0px":s*i+"px";if(t)u="0% -"+(o+i*o-o)+"px";if(i==n.strips-1){var l=t?"0px":r.slider.width()-s*i+"px",c=t?r.slider.height()-o*i+"px":"0px"}else{var l=t?"0px":s+"px",c=t?o+"px":"0px"}var h=e('<div class="iview-strip"></div>').css({width:l,height:c,top:a,left:f,background:'url("'+r.defs.image.data("iview:image")+'") no-repeat '+u,opacity:0});r.slider.append(h)}},addBlocks:function(){var t=this,n=Math.round(t.slider.width()/t.options.blockCols),r=Math.round(t.slider.height()/t.options.blockRows);for(var i=0;i<t.options.blockRows;i++){for(var s=0;s<t.options.blockCols;s++){var o=i*r+"px",u=s*n+"px",a=n+"px",f=r+"px",l="-"+(n+s*n-n)+"px -"+(r+i*r-r)+"px";if(s==t.options.blockCols-1)a=t.slider.width()-n*s+"px";var c=e('<div class="iview-block"></div>').css({width:n+"px",height:r+"px",top:i*r+"px",left:s*n+"px",background:'url("'+t.defs.image.data("iview:image")+'") no-repeat '+l,opacity:0});t.slider.append(c)}}},runTransition:function(t){var n=this;switch(t){case"strip-up-right":case"strip-up-left":n.addStrips();var r=0;i=0,s=e(".iview-strip",n.slider);if(t=="strip-up-left")s=e(".iview-strip",n.slider).reverse();s.each(function(){var t=e(this);t.css({top:"",bottom:"0px"});setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(i==n.options.strips-1)n.transitionEnd(n);i++})},100+r);r+=50});break;case"strip-down":case"strip-down-right":case"strip-down-left":n.addStrips();var r=0,i=0,s=e(".iview-strip",n.slider);if(t=="strip-down-left")s=e(".iview-strip",n.slider).reverse();s.each(function(){var t=e(this);t.css({bottom:"",top:"0px"});setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(i==n.options.strips-1)n.transitionEnd(n);i++})},100+r);r+=50});break;case"strip-left-right":case"strip-left-right-up":case"strip-left-right-down":n.addStrips(true);var r=0,i=0,o=0,s=e(".iview-strip",n.slider);if(t=="strip-left-right-down")s=e(".iview-strip",n.slider).reverse();s.each(function(){var t=e(this);if(i==0){t.css({right:"",left:"0px"});i++}else{t.css({left:"",right:"0px"});i=0}setTimeout(function(){t.animate({width:"100%",opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(o==n.options.strips-1)n.transitionEnd(n);o++})},100+r);r+=50});break;case"strip-up-down":case"strip-up-down-right":case"strip-up-down-left":n.addStrips();var r=0,i=0,o=0,s=e(".iview-strip",n.slider);if(t=="strip-up-down-left")s=e(".iview-strip",n.slider).reverse();s.each(function(){var t=e(this);if(i==0){t.css({bottom:"",top:"0px"});i++}else{t.css({top:"",bottom:"0px"});i=0}setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(o==n.options.strips-1)n.transitionEnd(n);o++})},100+r);r+=50});break;case"left-curtain":case"right-curtain":case"top-curtain":case"bottom-curtain":if(t=="left-curtain"||t=="right-curtain")n.addStrips();else n.addStrips(true);var r=0,i=0,s=e(".iview-strip",n.slider);if(t=="right-curtain"||t=="bottom-curtain")s=e(".iview-strip",n.slider).reverse();s.each(function(){var s=e(this);var o=s.width();var u=s.height();if(t=="left-curtain"||t=="right-curtain")s.css({top:"0px",height:"100%",width:"0px"});else s.css({left:"0px",height:"0px",width:"100%"});setTimeout(function(){if(t=="left-curtain"||t=="right-curtain")s.animate({width:o,opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(i==n.options.strips-1)n.transitionEnd(n);i++});else s.animate({height:u,opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(i==n.options.strips-1)n.transitionEnd(n);i++})},100+r);r+=50});break;case"strip-up-right":case"strip-up-left":n.addStrips();var r=0,i=0,s=e(".iview-strip",n.slider);if(t=="strip-up-left")s=e(".iview-strip",n.slider).reverse();s.each(function(){var t=e(this);t.css({bottom:"0px"});setTimeout(function(){t.animate({height:"100%",opacity:"1.0"},n.options.animationSpeed,n.defs.easing,function(){if(i==n.options.strips-1)n.transitionEnd(n);i++})},100+r);r+=50});break;case"strip-left-fade":case"strip-right-fade":case"strip-top-fade":case"strip-bottom-fade":if(t=="strip-left-fade"||t=="strip-right-fade")n.addStrips();else n.addStrips(true);var r=0,i=0,s=e(".iview-strip",n.slider);if(t=="strip-right-fade"||t=="strip-bottom-fade")s=e(".iview-strip",n.slider).reverse();s.each(function(){var s=e(this);var o=s.width();var u=s.height();if(t=="strip-left-fade"||t=="strip-right-fade")s.css({top:"0px",height:"100%",width:o});else s.css({left:"0px",height:u,width:"100%"});setTimeout(function(){s.animate({opacity:"1.0"},n.options.animationSpeed*1.7,n.defs.easing,function(){if(i==n.options.strips-1)n.transitionEnd(n);i++})},100+r);r+=35});break;case"slide-in-up":case"slide-in-down":opts={strips:1};n.addStrips(false,opts);var u=e(".iview-strip:first",n.slider),a=0;if(t=="slide-in-up")a="-"+n.defs.height+"px";else a=n.defs.height+"px";u.css({top:a,height:"100%",width:n.defs.width});u.animate({top:"0px",opacity:1},n.options.animationSpeed*2,n.defs.easing,function(){n.transitionEnd(n)});break;case"zigzag-top":case"zigzag-bottom":case"zigzag-grow-top":case"zigzag-grow-bottom":case"zigzag-drop-top":case"zigzag-drop-bottom":n.addBlocks();var f=n.options.blockCols*n.options.blockRows,r=0,l=new Array,c=e(".iview-block",n.slider);for(var h=0;h<n.options.blockRows;h++){var p=h%2,d=h*n.options.blockCols,v=(h+1)*n.options.blockCols;if(p==1){for(var m=v-1;m>=d;m--){l.push(e(c[m]))}}else{for(var m=d;m<v;m++){l.push(e(c[m]))}}}if(t=="zigzag-bottom"||t=="zigzag-grow-bottom"||t=="zigzag-drop-bottom")l.reverse();c.each(function(i){var s=e(l[i]),o=s.height(),u=s.width(),a=s.css("top");if(t=="zigzag-grow-top"||t=="zigzag-grow-bottom")s.width(0).height(0);else if(t=="zigzag-drop-top"||t=="zigzag-drop-bottom")s.css({top:"-=50"});setTimeout(function(){if(t=="zigzag-grow-top"||t=="zigzag-grow-bottom")s.animate({opacity:"1",height:o,width:u},n.options.animationSpeed,n.defs.easing,function(){if(i==f-1)n.transitionEnd(n)});else if(t=="zigzag-drop-top"||t=="zigzag-drop-bottom")s.animate({top:a,opacity:"1"},n.options.animationSpeed,n.defs.easing,function(){if(i==f-1)n.transitionEnd(n)});else s.animate({opacity:"1"},n.options.animationSpeed*2,"easeInOutExpo",function(){if(i==f-1)n.transitionEnd(n)})},100+r);r+=20});break;case"block-fade":case"block-fade-reverse":case"block-expand":case"block-expand-reverse":n.addBlocks();var f=n.options.blockCols*n.options.blockRows,i=0,r=0;var g=0;var y=0;var l=new Array;l[g]=new Array;var c=e(".iview-block",n.slider);if(t=="block-fade-reverse"||t=="block-expand-reverse"){c=e(".iview-block",n.slider).reverse()}c.each(function(){l[g][y]=e(this);y++;if(y==n.options.blockCols){g++;y=0;l[g]=new Array}});for(var m=0;m<n.options.blockCols*2;m++){var b=m;for(var h=0;h<n.options.blockRows;h++){if(b>=0&&b<n.options.blockCols){(function(){var s=e(l[h][b]);var o=s.width();var u=s.height();if(t=="block-expand"||t=="block-expand-reverse"){s.width(0).height(0)}setTimeout(function(){s.animate({opacity:"1",width:o,height:u},n.options.animationSpeed/1.3,n.defs.easing,function(){if(i==f-1)n.transitionEnd(n);i++})},100+r)})()}b--}r+=100}break;case"block-random":case"block-expand-random":case"block-drop-random":n.addBlocks();var f=n.options.blockCols*n.options.blockRows,r=0;var c=n.shuffle(e(".iview-block",n.slider));c.each(function(i){var s=e(this),o=s.height(),u=s.width(),a=s.css("top");if(t=="block-expand-random")s.width(0).height(0);if(t=="block-drop-random")s.css({top:"-=50"});setTimeout(function(){s.animate({top:a,opacity:"1",height:o,width:u},n.options.animationSpeed,n.defs.easing,function(){if(i==f-1)n.transitionEnd(n)})},100+r);r+=20});break;case"slide-in-right":case"slide-in-left":case"fade":default:opts={strips:1};n.addStrips(false,opts);var u=e(".iview-strip:first",n.slider);u.css({height:"100%",width:n.defs.width});if(t=="slide-in-right")u.css({height:"100%",width:n.defs.width,left:n.defs.width+"px",right:""});else if(t=="slide-in-left")u.css({left:"-"+n.defs.width+"px"});u.animate({left:"0px",opacity:1},n.options.animationSpeed*2,n.defs.easing,function(){n.transitionEnd(n)});break}},shuffle:function(e){var t=e.slice();var n=t.length;var r=n;while(r--){var i=parseInt(Math.random()*n);var s=t[r];t[r]=t[i];t[i]=s}return t},timerCall:function(e){e.processTimer();if(e.pieDegree>=360){e.cleanTimer();e.goTo(false)}},setTimer:function(){var e=this;e.timer=setInterval(function(){e.timerCall(e)},e.defs.time/120)},cleanTimer:function(){var e=this;clearInterval(e.timer);e.timer=null},goTo:function(t){var n=this;if(n.defs&&n.defs.slide==n.defs.total-1){n.options.onLastSlide.call(this)}n.cleanTimer();n.iviewTimer.animate({opacity:0});n.options.onBeforeChange.call(this);if(!t){n.slider.css("background",'url("'+n.defs.image.data("iview:image")+'") no-repeat')}else{if(t=="prev"||t=="next"){n.slider.css("background",'url("'+n.defs.image.data("iview:image")+'") no-repeat')}}n.defs.slide++;if(n.defs.slide==n.defs.total){n.defs.slide=0;n.options.onSlideShowEnd.call(this)}if(n.defs.slide<0)n.defs.slide=n.defs.total-1;n.defs.image=n.slides.eq(n.defs.slide);if(n.options.controlNav){e(".iview-controlNav a.iview-control",n.sliderContent).removeClass("active");e(".iview-controlNav a.iview-control:eq("+n.defs.slide+")",n.sliderContent).addClass("active")}var i=n.options.fx;if(n.options.fx.toLowerCase()=="random"){var s=new Array("left-curtain","right-curtain","top-curtain","bottom-curtain","strip-down-right","strip-down-left","strip-up-right","strip-up-left","strip-up-down","strip-up-down-left","strip-left-right","strip-left-right-down","slide-in-right","slide-in-left","slide-in-up","slide-in-down","fade","block-random","block-fade","block-fade-reverse","block-expand","block-expand-reverse","block-expand-random","zigzag-top","zigzag-bottom","zigzag-grow-top","zigzag-grow-bottom","zigzag-drop-top","zigzag-drop-bottom","strip-left-fade","strip-right-fade","strip-top-fade","strip-bottom-fade","block-drop-random");i=s[Math.floor(Math.random()*(s.length+1))];if(i==r)i="fade";i=e.trim(i.toLowerCase())}if(n.options.fx.indexOf(",")!=-1){var s=n.options.fx.split(",");i=s[Math.floor(Math.random()*s.length)];if(i==r)i="fade";i=e.trim(i.toLowerCase())}if(n.defs.image.data("iview:transition")){var s=n.defs.image.data("iview:transition").split(",");i=s[Math.floor(Math.random()*s.length)];i=e.trim(i.toLowerCase())}n.defs.easing=n.defs.image.data("iview:easing")?n.defs.image.data("iview:easing"):n.options.easing;n.defs.lock=true;n.runTransition(i)},playSlider:function(){var e=this;if(e.timer==null&&e.defs.paused){e.iviewTimer.removeClass("paused").attr("title",e.options.pauseLabel);e.setTimer();e.defs.paused=false;e.options.onPlay.call(this)}},stopSlider:function(){var e=this;e.iviewTimer.addClass("paused").attr("title",e.options.playLabel);e.cleanTimer();e.defs.paused=true;e.options.onPause.call(this)},setTimerPosition:function(){var e=this,t=e.options.timerPosition.toLowerCase().split("-");for(var n=0;n<t.length;n++){if(t[n]=="top"){e.iviewTimer.css({top:e.options.timerY+"px",bottom:""})}else if(t[n]=="middle"){e.iviewTimer.css({top:e.options.timerY+e.defs.height/2-e.options.timerDiameter/2+"px",bottom:""})}else if(t[n]=="bottom"){e.iviewTimer.css({bottom:e.options.timerY+"px",top:""})}else if(t[n]=="left"){e.iviewTimer.css({left:e.options.timerX+"px",right:""})}else if(t[n]=="center"){e.iviewTimer.css({left:e.options.timerX+e.defs.width/2-e.options.timerDiameter/2+"px",right:""})}else if(t[n]=="right"){e.iviewTimer.css({right:e.options.timerX+"px",left:""})}}},disableSelection:function(e){if(typeof e.onselectstart!="undefined")e.onselectstart=function(){return false};else if(typeof e.style.MozUserSelect!="undefined")e.style.MozUserSelect="none";else if(typeof e.style.webkitUserSelect!="undefined")e.style.webkitUserSelect="none";else if(typeof e.style.userSelect!="undefined")e.style.userSelect="none";else e.onmousedown=function(){return false};e.unselectable="on"},isTouch:function(){return!!("ontouchstart"in n)}};var s=function(e,t,n){this.m_pfnPercent=t;this.m_pfnFinished=n;this.m_nLoaded=0;this.m_nProcessed=0;this.m_aImages=new Array;this.m_nICount=e.length;for(var r=0;r<e.length;r++)this.Preload(e[r])};s.prototype={Preload:function(e){var t=new Image;this.m_aImages.push(t);t.onload=s.prototype.OnLoad;t.onerror=s.prototype.OnError;t.onabort=s.prototype.OnAbort;t.oImagePreload=this;t.bLoaded=false;t.source=e;t.src=e},OnComplete:function(){this.m_nProcessed++;if(this.m_nProcessed==this.m_nICount)this.m_pfnFinished();else this.m_pfnPercent(Math.round(this.m_nProcessed/this.m_nICount*10))},OnLoad:function(){this.bLoaded=true;this.oImagePreload.m_nLoaded++;this.oImagePreload.OnComplete()},OnError:function(){this.bError=true;this.oImagePreload.OnComplete()},OnAbort:function(){this.bAbort=true;this.oImagePreload.OnComplete()}};e.fn.iView=function(t){t=jQuery.extend({fx:"random",easing:"easeOutQuad",strips:20,blockCols:10,blockRows:5,animationSpeed:500,pauseTime:5e3,startSlide:0,directionNav:true,directionNavHoverOpacity:.6,controlNav:false,controlNavNextPrev:true,controlNavHoverOpacity:.6,controlNavThumbs:false,controlNavTooltip:true,captionSpeed:500,captionEasing:"easeInOutSine",captionOpacity:1,autoAdvance:true,keyboardNav:true,touchNav:true,pauseOnHover:false,nextLabel:"Next",previousLabel:"Previous",playLabel:"Play",pauseLabel:"Pause",closeLabel:"Close",randomStart:false,timer:"Pie",timerBg:"#000",timerColor:"#EEE",timerOpacity:.5,timerDiameter:30,timerPadding:4,timerStroke:3,timerBarStroke:1,timerBarStrokeColor:"#EEE",timerBarStrokeStyle:"solid",timerPosition:"top-right",timerX:10,timerY:10,tooltipX:5,tooltipY:-5,onBeforeChange:function(){},onAfterChange:function(){},onAfterLoad:function(){},onLastSlide:function(){},onSlideShowEnd:function(){},onPause:function(){},onPlay:function(){}},t);e(this).each(function(){var n=e(this);new i(n,t)})};e.fn.reverse=[].reverse;var o=e([]),u=e.resize=e.extend(e.resize,{}),a,f="setTimeout",l="resize",c=l+"-special-event",h="delay",p="throttleWindow";u[h]=250;u[p]=true;e.event.special[l]={setup:function(){if(!u[p]&&this[f]){return false}var t=e(this);o=o.add(t);e.data(this,c,{w:t.width(),h:t.height()});if(o.length===1){d()}},teardown:function(){if(!u[p]&&this[f]){return false}var t=e(this);o=o.not(t);t.removeData(c);if(!o.length){clearTimeout(a)}},add:function(t){function i(t,i,s){var o=e(this),u=e.data(this,c);u.w=i!==r?i:o.width();u.h=s!==r?s:o.height();n.apply(this,arguments)}if(!u[p]&&this[f]){return false}var n;if(e.isFunction(t)){n=t;return i}else{n=t.handler;t.handler=i}}};var v=!!("ontouchstart"in n),m=v?"touchstart":"mousedown",g=v?"touchend":"mouseup",y=v?"touchmove":"mousemove";e.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var t=this,n=e(t);n.bind(m,function(t){function u(t){if(!s){return}var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;o={time:(new Date).getTime(),coords:[n.pageX,n.pageY]};if(Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold){t.preventDefault()}}var i=t.originalEvent.touches?t.originalEvent.touches[0]:t,s={time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:e(t.target)},o;n.bind(y,u).one(g,function(t){n.unbind(y,u);if(s&&o){if(o.time-s.time<e.event.special.swipe.durationThreshold&&Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(s.coords[1]-o.coords[1])<e.event.special.swipe.verticalDistanceThreshold){s.origin.trigger("swipe").trigger(s.coords[0]>o.coords[0]?"swipeleft":"swiperight")}}s=o=r})})}};e.each({swipeleft:"swipe",swiperight:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)}}})})(jQuery,this)
